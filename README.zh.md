# éšæœºç”µå½±æ¨èå™¨ (Random Movie Recommender)

[Read in English](./README.md)

ä¸€ä¸ªåŸºäº Flask çš„ Web åº”ç”¨ï¼Œä» TMDb API è·å–ç”µå½±æ•°æ®ï¼Œè¿›è¡Œéšæœºæ¨èï¼Œæ”¯æŒç¼“å­˜ã€æ”¶è—å’Œç±»å‹è¿‡æ»¤ã€‚é€‚åˆå­¦ä¹  API è°ƒç”¨ã€æ¨èç®—æ³•å’Œ Web å¼€å‘ã€‚

## ä¸»è¦åŠŸèƒ½
- éšæœºæ¨èç”µå½±ï¼ˆå•ç‰‡/æ‰¹é‡ï¼Œæ”¯æŒç±»å‹è¿‡æ»¤ï¼‰
- æ˜¾ç¤ºç”µå½±è¯¦æƒ…ï¼ˆç‰‡åã€å¹´ä»½ã€è¯„åˆ†ã€ç±»å‹ã€ç®€ä»‹ï¼‰
- æœ¬åœ°ç¼“å­˜ä»¥å‡å°‘ API è¯·æ±‚
- Web ç•Œé¢ï¼šä¸‹æ‹‰é€‰æ‹©ç±»å‹ã€æ¨èæŒ‰é’®ã€æ”¶è—ç®¡ç†
- æŒä¹…åŒ–æ”¶è—ï¼ˆå­˜å‚¨åœ¨ data/favorites.jsonï¼‰

## è¦æ±‚
- Python 3.8+
- Flask
- requests

## å®‰è£…
åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼ˆæ¨èä½¿ç”¨ venvï¼‰ï¼š
```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt    # è‹¥æ—  requirements.txtï¼Œåˆ™ pip install flask requests
```

## é…ç½® API Key
ç¨‹åºä½¿ç”¨ TMDb APIã€‚è·å– Key åè®¾ç½®ç¯å¢ƒå˜é‡ï¼š

### è·å– TMDB API å¯†é’¥ï¼š
è®¿é—® [TMDB ç½‘ç«™](https://www.themoviedb.org/)ï¼Œæ³¨å†Œå¹¶ç”Ÿæˆ API å¯†é’¥ï¼ˆv3 auth keyï¼‰ã€‚

### åœ¨ç»ˆç«¯ä¸­è®¾ç½®ç¯å¢ƒå˜é‡å¹¶è¿è¡Œï¼š
1. åœæ­¢å½“å‰åº”ç”¨ï¼ˆæŒ‰ Ctrl+Cï¼‰ã€‚
2. åœ¨ PowerShell ä¸­è¿è¡Œï¼š
   ```
   $env:TMDB_API_KEY = "YOUR_API_KEY_HERE"
   python app.py
   ```
3. æˆ–åœ¨ CMD ä¸­è¿è¡Œï¼š
   ```
   set TMDB_API_KEY=YOUR_API_KEY_HERE
   python app.py
   ```
4. å°† `YOUR_API_KEY_HERE` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…å¯†é’¥ã€‚

### éªŒè¯ï¼š
- åº”ç”¨é‡å¯åï¼Œè®¿é—® http://localhost:5000ã€‚
- æ£€æŸ¥ç»ˆç«¯æ˜¯å¦ä»æœ‰è­¦å‘Šã€‚å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·ç¡®è®¤å¯†é’¥æ­£ç¡®ï¼Œå¹¶å°è¯•åˆ·æ–°é¡µé¢æˆ–ç‚¹å‡»â€œğŸ”„ åˆ·æ–°æ•°æ®â€æŒ‰é’®ã€‚
- å¦‚æœæ‚¨å¸Œæœ›æ°¸ä¹…è®¾ç½®ï¼ˆä¸æ¯æ¬¡è¿è¡Œéƒ½è¾“å…¥ï¼‰ï¼Œè¯·åœ¨ Windows ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ  `TMDB_API_KEY`ã€‚å¦‚æœä»æœ‰é—®é¢˜ï¼Œæä¾›æ›´å¤šç»ˆç«¯è¾“å‡ºã€‚

> ä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œé¿å…å°† Key æäº¤åˆ°ç‰ˆæœ¬åº“ã€‚

## è¿è¡Œ
åœ¨æ¿€æ´»çš„è™šæ‹Ÿç¯å¢ƒä¸­ç›´æ¥æ‰§è¡Œï¼š
```powershell
python app.py
```
ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:5000 ä½¿ç”¨ Web ç•Œé¢ã€‚

## æµ‹è¯•
é¡¹ç›®åŒ…å« pytest æµ‹è¯•ç”¨ä¾‹ï¼ˆtests/ï¼‰ã€‚è¿è¡Œï¼š
```powershell
pip install pytest
python -m pytest -q
```

## é¡¹ç›®ç»“æ„
```
Random Movie Recommender/
â”œâ”€ data/                      # ç¼“å­˜æ•°æ®å’Œæ”¶è—ï¼ˆfavorites.jsonï¼‰
â”œâ”€ src/
â”‚  â”œâ”€ api_client.py          # TMDb API å®¢æˆ·ç«¯
â”‚  â”œâ”€ requester.py           # è¯·æ±‚å°è£…
â”‚  â”œâ”€ endpoints.py           # API ç«¯ç‚¹å¤„ç†
â”‚  â”œâ”€ factory.py             # å®¢æˆ·ç«¯å·¥å‚
â”‚  â”œâ”€ storage.py             # æ•°æ®å­˜å‚¨ä¸ç¼“å­˜
â”‚  â”œâ”€ recommenders.py        # æ¨èç®—æ³•
â”‚  â”œâ”€ utils.py               # å·¥å…·å‡½æ•°ï¼ˆæ ¼å¼åŒ–ã€è¿‡æ»¤ç­‰ï¼‰
â”‚  â”œâ”€ preferences.py         # ç”¨æˆ·åå¥½è®¾ç½®
â”‚  â”œâ”€ retry_policy.py        # é‡è¯•ç­–ç•¥
â”œâ”€ tests/                     # å•å…ƒæµ‹è¯•
â”‚  â”œâ”€ test_api.py
â”‚  â”œâ”€ test_endpoints.py
â”‚  â”œâ”€ test_factory.py
â”‚  â”œâ”€ test_recommenders.py
â”‚  â”œâ”€ test_storage.py
â”‚  â”œâ”€ test_utils.py
â”‚  â””â”€ conftest.py
â”œâ”€ app.py                     # Flask åç«¯åº”ç”¨
â”œâ”€ index.html                 # Web å‰ç«¯ç•Œé¢
â”œâ”€ config.py (å¯é€‰)           # é…ç½®ï¼ˆå¯é€‰ï¼‰
â””â”€ README.md
```

## å¸¸è§é—®é¢˜
- ä¸‹æ‹‰èœå•æ— é€‰é¡¹ï¼šç¡®è®¤ TMDB_API_KEY å·²æ­£ç¡®è®¾ç½®ï¼Œæ£€æŸ¥ç»ˆç«¯è¾“å‡ºæ˜¯å¦æœ‰ 500 é”™è¯¯ã€‚
- æ¨èç»“æœé‡å¤ï¼šæ£€æŸ¥ç¼“å­˜ç­–ç•¥ï¼Œç¡®ä¿éšæœºé¡µä¸æŸ¥è¯¢å‚æ•°æ­£ç¡®ã€‚
- API è¯·æ±‚å¤±è´¥ï¼šç¡®è®¤ç½‘ç»œ/ä»£ç†ä¸ TMDB_API_KEY æ˜¯å¦æ­£ç¡®ã€‚

## è´¡çŒ®
æ¬¢è¿æäº¤ issue æˆ– PRã€‚è¯·åœ¨ PR ä¸­è¯´æ˜æ”¹åŠ¨ç›®çš„å¹¶é™„å¸¦å•å…ƒæµ‹è¯•ã€‚

## è®¸å¯è¯
MIT